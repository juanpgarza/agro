<odoo>
  <data>

        <!-- despues le asigno este grupo a las opciones de menu 
        que no se tienen que mostrar a los usuarios de Agro  -->
        <record model="res.groups" id="sin_implementar">
            <field name="name">Agro - Sin Implementar</field>
            <field name="users" eval="[(4, ref('base.user_root'))]"/>
        </record>

        <!-- <record id="agro_access_StockPickingType" model="ir.model.access">
            <field name="name">agro_access_StockPickingType</field>
            <field name="model_id" ref="stock.stock_picking_type"/>
            <field name="group_id" ref="inventory.user"/>
            <field name="perm_read" eval="1"/>
            <field name="perm_create" eval="1"/>
            <field name="perm_write" eval="1"/>
            <field name="perm_unlink" eval="0"/>
        </record> -->

        <!-- asi se eliminan registros -->
        <!-- <delete id="sin_implementar" model="res.groups"/> -->
        <!-- <delete id="module_name.xml_record_id" model="hr.employee"/> -->

        <!-- 
        ############ STOCK ############
        -->

        <!-- 
        *********** stock.picking.type 
        -->
        
        <!-- me permite filtrar los cuadros del tablero por despósito -->
        <record id="view_pickingtype_filter_inherited" model="ir.ui.view">
            <field name="name">Agro</field>
            <field name="model">stock.picking.type</field>
            <field name="inherit_id" ref="stock.view_pickingtype_filter"/>
            <field name="arch" type="xml">
                <field name="warehouse_id" position="after">			
                    <filter name="filter_GR" string="Dep. Roca" domain="[('warehouse','ilike','%roca%')]" />
                    <filter name="filter_VR" string="Dep. Regina" domain="[('warehouse','ilike','%regina%')]" />
                </field>
            </field>
        </record>

        <!-- 
        *********** stock.picking 
        -->

        <!-- <record id= "agro_vpicktree_inherited" model= "ir.ui.view">
            <field name="inherit_id" ref="stock.vpicktree" />
            <field name="model">stock.picking</field>
            <field name="arch" type="xml">                
                <field name="name" position="before">
                    <field name="picking_type_id" string='Tipo de movimiento'/>
                    <field name="aprobado_por_id"/>                    
                </field>
                <field name="backorder_id" position='attributes'>
                    <attribute name="invisible">1</attribute>
                </field>        
            </field>
        </record> -->

        <!-- Si la vista la modifico por herencia no sé como sacarle la opción "Crear" -->
        <record model="ir.ui.view" id="agro_vpicktree">
            <field name="name">Movimientos</field>
            <field name="model">stock.picking</field>
            <field name="arch" type="xml">
                <tree create="false">
                    <!-- <field name="name"/> -->
                    <field name="warehouse"/>
                    <field name="min_date" string="Fecha"/>
                    <!-- <field name="picking_type_id" string='Tipo de movimiento'/> -->
                    <!-- <field name="code"/> -->
                    <field name="picking_type" string='Tipo de movimiento'/>                    
                    <field name="aprobado_por_id"/>
                    <field name="location_id"/>
                    <field name="location_dest_id"/>
                    <field name="partner_id"/>
                    <field name="date" invisible="1"/>                    
                    <field name="origin"/>
                    <field name="group_id" invisible="1"/>
                    <field name="backorder_id" invisible="1"/>
                    <field name="state"/>
                    <field name="priority" invisible="1"/>
                    <field name="picking_type_id" invisible="1"/>
                    <field name="localidad_usuario" invisible="0"/>
                </tree>
            </field>
        </record>

        <record id="stock.action_picking_tree_all" model="ir.actions.act_window">
            <field name="context">{ 'search_default_filter_GR':  [('localidad_usuario', 'like', '%cualquiera%')],
                                    'search_default_filter_VR':  False}
            </field>
        </record>

        <record id="agro_view_picking_type_tree_action" model="ir.actions.act_window.view">
            <field name="act_window_id" ref="stock.action_picking_tree_all" />
            <field name="view_id" ref="agro_vpicktree" />
            <field name="view_mode">tree</field>
            <field name="sequence">21</field>
        </record>

        <record id= "agro_view_picking_form_inherited" model= "ir.ui.view">
            <field name="inherit_id" ref="stock.view_picking_form" />
            <field name="model">stock.picking</field>
            <field name="arch" type="xml"> 

                <xpath expr="//button[@name='action_confirm']" position="after">
                    <button name="action_aprobar" states="draft, esperando_aprobacion" string="Aprobar" 
                    type="object" class="oe_highlight" groups="base.group_user"/>
                </xpath>

                <!-- <field name="partner_id" position="attributes">
                    <attribute name="domain">[('customer', '=', True)]</attribute> -->
                    <!-- <attribute name="domain">[('customer', '=', True)]</attribute> -->
                    <!-- , ('picking_type_id','=','4') -->
                <!-- </field> -->
                <field name="origin" position="before">                    
                    <field name="requiere_aprobacion" invisible="1"/>                    
                    <field name="aprobado_por_id" attrs="{'required': [('requiere_aprobacion', '=', True)]}"/>                
                </field>
                <field name="location_id" position="attributes">
                    <attribute name="readonly">1</attribute>
                </field>
                <field name="location_dest_id" position="attributes">
                    <attribute name="readonly">1</attribute>
                </field>
                <field name="picking_type_id" position="attributes">
                    <attribute name="readonly">1</attribute>
                </field>
                
                <field name="group_id" position="attributes">
                    <attribute name="invisible">1</attribute>
                </field>

                <field name="priority" position="attributes">
                    <attribute name="invisible">1</attribute>
                </field>
            </field>
        </record>    

        <record id="view_picking_internal_search_inherited" model="ir.ui.view">
            <field name="name">Agro</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_internal_search"/>
            <field name="arch" type="xml">
                <filter name="late" position="attributes">
                    <attribute name="invisible">1</attribute>
                </filter>
                <filter name="backorder" position="before">			
                    <filter name="filter_GR" string="Dep. Roca" domain="[('warehouse','ilike','%roca%')]" />
                    <filter name="filter_VR" string="Dep. Regina" domain="[('warehouse','ilike','%regina%')]" />
                </filter>
                <filter name="backorder" position="attributes">
                    <attribute name="invisible">1</attribute>
                </filter>
                <filter name="backorder" position="after">	
                    <separator/>
                    <filter name="filter_tipo_recepcion" string="Recepciones" domain="[('code','ilike','%Inco%')]" />		
                    <filter name="filter_tipo_interno" string="Transf. internas" domain="[('code','ilike','%Internal%')]" />
                    <filter name="filter_tipo_entrega" string="Entregas" domain="[('code','ilike','%Out%')]" />
                </filter>
            </field>
        </record>

        <!-- 
        *********** stock.picking.type 
        -->

        <!-- Esto esta copiado desde la app de stock. 
        Si lo heredo no puedo agregar los campos de personalización en grupos propios (Agro 1 y Agro 2)  -->
        <record model="ir.ui.view" id="agro_view_picking_type_form">
            <field name="name">Operation Types</field>
            <field name="model">stock.picking.type</field>
            <field name="arch" type="xml">
                <form string="Operation Types">
                    <sheet>
                        <div class="oe_button_box" name="button_box">
                            <button name="toggle_active" type="object" class="oe_stat_button" icon="fa-archive">
                                <field name="active" widget="boolean_button" options='{"terminology": "archive"}'/>
                            </button>
                        </div>
                        <group>
                            <group>
                                <field name="name"/>
                                <field name="sequence_id"/>
                                <field name="warehouse_id"/>
                            </group>
                            <group>
                                <field name="code"/>
                                <field name="return_picking_type_id"/>
                                <field name="barcode_nomenclature_id" groups="base.group_no_one"/>
                            </group>
                        </group>
                        <group>
                            <group string="Packs and Lots" groups="stock.group_tracking_lot,stock.group_production_lot">
                                <field name="show_entire_packs" groups="stock.group_tracking_lot"/>
                                <field name="use_create_lots" groups="stock.group_production_lot"/>
                                <field name="use_existing_lots" groups="stock.group_production_lot"/>
                            </group>
                            <group string="Locations">
                                <field name="default_location_src_id" attrs="{'required': [('code', '=', 'internal')]}"/>
                                <field name="default_location_dest_id" attrs="{'required': [('code', 'in', ('internal', 'incoming'))]}"/>
                            </group>
                        </group>
                        <group>
                            <group string="Agro 1">
                                <field name="requiere_aprobacion"/>
                            </group>
                            <group string="Agro 2">
                            </group>
                        </group>
                    </sheet>
                </form>
            </field>
        </record>

        <!--A-->
        <record id="agro_view_picking_type_form_action" model="ir.actions.act_window.view">
            <field name="act_window_id" ref="stock.action_picking_type_list" />
            <field name="view_id" ref="agro_view_picking_type_form" />
            <field name="view_mode">form</field>
            <field name="sequence">21</field>
        </record> -->
        
        <!--B-->
        <!-- Si solo tengo A, cuando elijo la opción de menú solo me muestra la form view es estado alta -->
        <record id="agro_view_picking_type_tree_action" model="ir.actions.act_window.view">
            <field name="act_window_id" ref="stock.action_picking_type_list" />
            <field name="view_id" ref="stock.view_picking_type_tree" />
            <field name="view_mode">tree</field>
            <field name="sequence">21</field>
        </record>

        <!-- 
        *********** stock.production.lot 
        -->
        <record id= "agro_view_production_lot_tree_inherited" model= "ir.ui.view">
            <field name="inherit_id" ref="stock.view_production_lot_tree" />
            <field name="model">stock.production.lot</field>
            <field name="arch" type="xml">                
                <field name="product_id" position="after">                    
                    <field name="product_qty" string="Cantidad"/>
                    <field name="removal_date" string="Fecha de vencimiento"/>
                </field>    
            </field>
        </record>  

        <record id= "agro_view_move_form_expiry_inherited" model= "ir.ui.view">
            <field name="name">stock.production.lot.form</field>
            <field name="inherit_id" ref="product_expiry.view_move_form_expiry" />
            <field name="model">stock.production.lot</field>
            <field name="arch" type="xml">                                
                <!-- JPG: esto no funciona. Me parece que es para Odoo 10 
                    <field name="life_date" invisible="1"/> 
                    -->
                <field name="product_id" position='before'>
                    <field name="descripcion"/>
                </field>
                <field name="life_date" position='attributes'>
                    <attribute name="invisible">1</attribute>
                </field>
                <field name="use_date" position='attributes'>
                    <attribute name="invisible">1</attribute>
                </field>      
                <field name="alert_date" position='attributes'>
                    <attribute name="invisible">1</attribute>
                </field>
                <field name="removal_date" position='replace'>
                    <field name="removal_date" string='Fecha de vencimiento'/>
                </field>
                <field name="removal_date" position='before'>
                    <field name="fecha_produccion"/>
                </field>
            </field>
        </record>

        <!-- 
            NO IMPLEMENTADOS
            base.group_user: es el grupo "Employee"
        -->
        <record id= "mail.mail_channel_menu_root_chat" model= "ir.ui.menu">
            <field name="groups_id"  eval="[(4,ref('sin_implementar')), (3,ref('sales_team.group_sale_manager')), (3,ref('base.group_user'))]" />             
        </record>

        <record id= "stock.menu_quants" model= "ir.ui.menu">
            <field name="groups_id"  eval="[(4,ref('sin_implementar')), 
                                            (3,ref('sales_team.group_sale_manager'))]" />             
        </record>    

        <record id= "stock.menu_stock_procurement_action" model= "ir.ui.menu">
            <field name="groups_id"  eval="[(4,ref('sin_implementar')), 
                                            (3,ref('stock.group_stock_manager'))]" />             
        </record> 

        <record id= "stock.menu_stock_sched" model= "ir.ui.menu">
            <field name="groups_id"  eval="[(4,ref('sin_implementar')), 
                                            (3,ref('stock.group_stock_manager'))]" />             
        </record>

        <!-- 
            IMPLEMENTADOS
         -->
        <record id= "stock.menu_warehouse_report" model= "ir.ui.menu">
            <field name="groups_id"  eval="[(3,ref('stock.group_stock_manager'))]" />             
        </record>

        <record id= "stock.menu_report_stock_line_date" model= "ir.ui.menu">
            <field name="groups_id"  eval="[(3,ref('base.group_no_one'))]" />             
        </record>


        <!-- <record id= "stock.menu_stock_root" model= "ir.ui.menu">
            <field name="name" >Stock</field>             
        </record> -->

        <!-- <menuitem name="Inventory" id="menu_stock_root" sequence="30"
        groups="group_stock_manager,group_stock_user"
        web_icon="stock,static/description/icon.png"/> -->

        <!-- 
        *********** stock.quant 
        -->

        <record id= "view_stock_quant_tree_inherited" model= "ir.ui.view">
            
            <field name="inherit_id" ref="stock.view_stock_quant_tree" />
            <field name="model">stock.quant</field>
            <field name="arch" type="xml">                                

                <field name="lot_id" position='after'>
                    <field name="removal_date" widget="date"/>
                </field>

                <field name="in_date" position='attributes'>
                    <attribute name="invisible">1</attribute>
                    <!-- <attribute name="groups">base.sin_implementar</attribute> -->
                </field>

                <field name="inventory_value" position='attributes'>
                    <attribute name="invisible">1</attribute>
                </field>

            </field>
        </record>

        <!-- 
        *********** stock.scrap 
        -->

        <record id= "stock_scrap_form_view_inherited" model= "ir.ui.view">            
            <field name="inherit_id" ref="stock.stock_scrap_form_view" />
            <field name="model">stock.scrap</field>
            <field name="arch" type="xml">                               

                <field name="state" position='before'>
                    <button name="action_aprobar" 
                    string="Aprobar" 
                    type="object" 
                    states="esperando" class="btn-primary" 
                    groups="stock.group_stock_manager"/>
                </field>

                <field name="state" position='before'>
                    <button name="action_rechazar" 
                    string="Rechazar" 
                    type="object" 
                    states="esperando" class="btn-primary"
                    groups="stock.group_stock_manager"/>
                </field>

                <field name="state" position='attributes'>
                    <attribute name="statusbar_visible">draft,esperando,rechazado,done</attribute>
                    <!-- <attribute name="statusbar_visible" states="rechazado">draft,esperando,rechazado</attribute> -->
                </field>

                <field name="date_expected" position='after'>
                    <field name="evaluado_por_id" readonly="1"/>
                </field>

                <sheet position="after">
                    <div class="oe_chatter">
                        <field name="message_follower_ids" widget="mail_followers" />
                        <field name="message_ids" widget="mail_thread" />
                    </div>
                </sheet>

            </field>
        </record>



        <!-- 
        ############ VENTAS ############        
        -->

        <record id= "agro_view_order_form_inherited" model= "ir.ui.view">
            <field name="name">sale.order.form</field>
            <field name="inherit_id" ref="sale.view_order_form" />
            <!-- <field name="name">sale.order.form.sale.stock</field>
            <field name="inherit_id" ref="sale_stock.view_order_form_inherit_sale_stock" /> -->
            <field name="model">sale.order</field>
            <field name="arch" type="xml">

                <!-- Quito el botón "Enviar por email"-->
                <xpath expr="//button[@name='action_quotation_send'][1]" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>

                <!-- Quito el botón "Enviar por email"-->
                <xpath expr="//button[@name='action_quotation_send'][2]" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>

                <!-- Quito el botón "Crear factura" en presu -->
                <xpath expr="//button[@name='297'][1]" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>

                <!-- Quito el botón "Crear factura" en Orden de Venta -->
                <xpath expr="//button[@name='297'][2]" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>
                
                <!-- Quito la opción "Presupuesto Enviado" de la status bar -->
                <field name="state" position='attributes'>
                    <attribute name="statusbar_visible">draft,sale</attribute>
                </field>

                <!-- <xpath expr="//group[@name='sale_shipping']" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath> -->

                <xpath expr="//group[@name='sales_person']" position="attributes">
                    <attribute name="invisible">True</attribute>
                </xpath>

                <xpath expr="//group[@name='sale_pay']" position="attributes">
                    <attribute name="invisible">True</attribute>
                    <!-- <attribute name="groups">"sin_implementar"</attribute> -->
                </xpath>

            </field>
        </record>

        <!-- 
            NO IMPLEMENTADOS
         -->
        <record id= "sales_team.menu_sales_team_act" model= "ir.ui.menu">
            <field name="groups_id"  eval="[(4,ref('sin_implementar')), (3,ref('sales_team.group_sale_manager'))]" />             
        </record>

        <record id= "sale.menu_sale_invoicing" model= "ir.ui.menu">
            <field name="groups_id"  eval="[(4,ref('sin_implementar')), (3,ref('sales_team.group_sale_manager'))]" />             
        </record>

        <record id= "sales_team.menu_sale_report" model= "ir.ui.menu">
            <field name="groups_id"  eval="[(4,ref('sin_implementar')),
                                            (3,ref('sales_team.group_sale_manager'))
                                            ]" />             
        </record>

        <record id= "sales_team.menu_sale_config" model= "ir.ui.menu">
            <field name="groups_id"  eval="[(4,ref('sin_implementar')),
                                            (3,ref('sales_team.group_sale_manager'))
                                            ]" />             
        </record>

        <!-- 
            IMPLEMENTADOS
         -->
        <record id= "sale.menu_sale_quotations" model= "ir.ui.menu">
            <field name="groups_id"  eval="[(3,ref('sales_team.group_sale_manager'))]" />             
        </record>

        <!-- 
        ############ FACTURACION ############        
        -->
        <!-- 
            NO IMPLEMENTADOS
         -->
        <record id= "account.menu_finance" model= "ir.ui.menu">
            <field name="groups_id"  eval="[(4,ref('sin_implementar')),
                                            (3,ref('account.group_account_user')),
                                            (3,ref('account.group_account_manager')),
                                            (3,ref('account.group_account_invoice'))
                                            ]" />             
        </record>

  </data>
</odoo>